# AIGEN Science κ°„λ‹¨ν• μ•λ¦Ό μ‹μ¤ν… κ°€μ΄λ“

## κ°μ”

μ΄ μ‹μ¤ν…μ€ `news_recommendation.py`μ κΈ°μ΅΄ ν•¨μλ“¤μ„ ν™μ©ν•μ—¬ μ‚¬μ©μλ“¤μ—κ² μ •κΈ°μ μΌλ΅ κ°μΈν™”λ λ‰΄μ¤ μ¶”μ²μ„ Slackκ³Ό μ΄λ©”μΌλ΅ μ „μ†΅ν•λ” μ‹μ¤ν…μ…λ‹λ‹¤.

## μ£Όμ” νΉμ§•

- **κΈ°μ΅΄ μ½”λ“ μ¬ν™μ©**: `news_recommendation.py`μ `extract_profile_keywords` ν•¨μ ν™μ©
- **κ°„λ‹¨ν• κµ¬μ΅°**: ν•λ‚μ νμΌλ΅ λ¨λ“  κΈ°λ¥ κµ¬ν„
- **Docker λ¶ν•„μ”**: λ΅μ»¬μ—μ„ μ§μ ‘ μ‹¤ν–‰ κ°€λ¥
- **μ‹¤μ  μ„λ²„ μ—°λ™**: `http://34.61.170.171:8001/recommendations` API μ‚¬μ©

## ν•µμ‹¬ ν•¨μ

### 1. ν”„λ΅ν•„ ν‚¤μ›λ“ μ¶”μ¶
```python
from src.app.news_recommendation import extract_profile_keywords

# ν”„λ΅ν•„ μ»¨ν…μ¤νΈμ—μ„ ν‚¤μ›λ“ μ¶”μ¶
keywords = extract_profile_keywords("λ°”μ΄μ¤ μ μ•½ λ°°κ³ ν”” λΉµ κ³Όμ μ„Έν¬")
# κ²°κ³Ό: ['λ°”μ΄μ¤', 'μ μ•½', 'μ„Έν¬'] (μμ‹)
```

### 2. κ°μΈν™”λ μΏΌλ¦¬ μƒμ„±
```python
def generate_personalized_query(profile_context: str) -> str:
    keywords = extract_profile_keywords(profile_context)
    if keywords:
        query = f"{' '.join(keywords)} λ‰΄μ¤"
        return query
    return "μµμ‹  κ³Όν•™ λ‰΄μ¤"
```

### 3. RAG μ¶”μ² μƒμ„±
```python
def RAG(profile_context: str, notification_query: str = None):
    # μ‚¬μ©μ μ„¤μ • μΏΌλ¦¬ μ°μ„ , μ—†μΌλ©΄ ν”„λ΅ν•„ κΈ°λ° μλ™ μƒμ„±
    if notification_query and notification_query.strip():
        query = notification_query
    elif profile_context:
        query = generate_personalized_query(profile_context)
    else:
        query = "μµμ‹  κ³Όν•™ λ‰΄μ¤"
    
    # API νΈμ¶ν•μ—¬ λ‰΄μ¤ μ¶”μ² λ°›κΈ°
    # ...
```

## ν•„μ”ν• κ²ƒλ“¤

### 1. μμ΅΄μ„± μ„¤μΉ
```bash
pip install schedule sib-api-v3-sdk supabase requests python-dotenv
```

### 2. ν™κ²½ μ„¤μ •
- `.env` νμΌμ— ν•„μ”ν• ν™κ²½ λ³€μ μ„¤μ •
- Supabase μ—°κ²° μ •λ³΄ ν™•μΈ
- Brevo API ν‚¤ μ„¤μ •

### 3. λ‰΄μ¤ μ¶”μ² API μ‹¤ν–‰
μ•λ¦Ό μ‹μ¤ν…μ΄ μ‘λ™ν•λ ¤λ©΄ λ‰΄μ¤ μ¶”μ² APIκ°€ μ‹¤ν–‰ μ¤‘μ΄μ–΄μ•Ό ν•©λ‹λ‹¤:
```bash
# λ‰΄μ¤ μ¶”μ² API μ‹¤ν–‰ (ν¬νΈ 8001)
python src/app/news_recommendation.py
```

## μ‚¬μ©λ²•

### 1. μ•λ¦Ό μ‹μ¤ν… μ‹¤ν–‰
```bash
python simple_notification_system.py
```

### 2. ν…μ¤νΈ
```bash
python test_simple_notification.py
```

## μ‘λ™ λ°©μ‹

1. **λ§¤μ‹κ°„ μ •κ°**μ— μ‹μ¤ν…μ΄ μ‹¤ν–‰λ©λ‹λ‹¤
2. **Supabase**μ—μ„ λ¨λ“  μ‚¬μ©μ μ •λ³΄λ¥Ό κ°€μ Έμµλ‹λ‹¤
3. **ν„μ¬ μ‹κ°„**κ³Ό **μ•λ¦Ό μ‹κ°„**μ΄ μΌμΉν•λ” μ‚¬μ©μλ¥Ό μ°Ύμµλ‹λ‹¤
4. **μΏΌλ¦¬ μ°μ„ μμ„**:
   - μ‚¬μ©μκ°€ μ„¤μ •ν• `notification_query` (μ°μ„ )
   - `extract_profile_keywords` ν•¨μλ΅ ν”„λ΅ν•„μ—μ„ ν‚¤μ›λ“ μ¶”μ¶
   - κΈ°λ³Έ μΏΌλ¦¬ "μµμ‹  κ³Όν•™ λ‰΄μ¤"
5. **λ‰΄μ¤ μ¶”μ² API**λ¥Ό νΈμ¶ν•μ—¬ κ°μΈν™”λ λ‰΄μ¤λ¥Ό λ°›μµλ‹λ‹¤
6. **Slack**κ³Ό **μ΄λ©”μΌ**λ΅ μ•λ¦Όμ„ μ „μ†΅ν•©λ‹λ‹¤

## μ•λ¦Ό λ©”μ‹μ§€ μμ‹

### ν”„λ΅ν•„: "λ°”μ΄μ¤ μ μ•½ λ°°κ³ ν”” λΉµ κ³Όμ μ„Έν¬"
```
[μ‚¬μ©μλ…] π“° μƒλ΅μ΄ λ°”μ΄μ¤ μ μ•½ κΈ°μ  κ°λ°: νμ‹ μ μΈ μ„Έν¬ μΉλ£μ κ°€ μ„μƒμ‹ν—μ„ ν†µκ³Όν–μµλ‹λ‹¤...
π“° μ μ•½ μ‚°μ—… ν¬μ λ™ν–¥: λ°”μ΄μ¤ν…ν¬ μ¤νƒ€νΈμ—…λ“¤μ΄ ν™λ°ν• ν¬μλ¥Ό λ°›κ³  μμµλ‹λ‹¤...
π“° μ„Έν¬ μΉλ£ μ—°κµ¬ μ„±κ³Ό: μ•” μΉλ£λ¥Ό μ„ν• μƒλ΅μ΄ μ„Έν¬ μΉλ£λ²•μ΄ κ°λ°λμ—μµλ‹λ‹¤...
```

### ν”„λ΅ν•„: "AI μ—°κµ¬μ›"
```
[μ‚¬μ©μλ…] π“° GPT-5 κ°λ° μ§„ν–‰μƒν™©: OpenAIμ μ°¨μ„Έλ€ μ–Έμ–΄λ¨λΈ κ°λ°μ΄ μμ΅°λ΅­κ² μ§„ν–‰λκ³  μμµλ‹λ‹¤...
π“° λ¨Έμ‹ λ¬λ‹ μ•κ³ λ¦¬μ¦ νμ‹ : μƒλ΅μ΄ λ”¥λ¬λ‹ μ•„ν‚¤ν…μ²κ°€ μ„±λ¥μ„ ν¬κ² ν–¥μƒμ‹μΌ°μµλ‹λ‹¤...
π“° AI μ¤λ¦¬ κ°€μ΄λ“λΌμΈ: μΈκ³µμ§€λ¥ κ°λ°μ— λ€ν• μƒλ΅μ΄ μ¤λ¦¬ κΈ°μ¤€μ΄ μ μ •λμ—μµλ‹λ‹¤...
```

## μ„¤μ • λ°©λ²•

### 1. μ‚¬μ©μ ν”„λ΅ν•„ μ„¤μ •
ν”„λ΅ νΈμ—”λ“μ—μ„ λ‹¤μ μ •λ³΄λ¥Ό μ„¤μ •:
- **ν”„λ΅ν•„ μ»¨ν…μ¤νΈ**: "λ¬΄μ—‡μ— κ΄€μ‹¬μ΄ μμΌμ‹ κ°€μ”?" (μλ™ μΏΌλ¦¬ μƒμ„±μ©)
- **μ¬λ™ WebHook URL**: Slack μ•λ¦Όμ„ λ°›μ„ μ›Ήν›… URL
- **μ΄λ©”μΌ**: μ΄λ©”μΌ μ•λ¦Όμ„ λ°›μ„ μ£Όμ†
- **μ•λ¦Ό μ‹κ°„**: λ§¤μ‹κ°„ μ¤‘ μ–Έμ  μ•λ¦Όμ„ λ°›μ„μ§€ (HH:MM ν•μ‹)
- **μ•λ¦Ό μΏΌλ¦¬**: μ§μ ‘ μ„¤μ •ν•κ³  μ‹¶μ€ μΏΌλ¦¬ (μ„ νƒμ‚¬ν•­)

### 2. λ°μ΄ν„°λ² μ΄μ¤ μ„¤μ •
```sql
-- notification_query ν•„λ“ μ¶”κ°€ (μ„ νƒμ‚¬ν•­)
ALTER TABLE profiles 
ADD COLUMN IF NOT EXISTS notification_query TEXT DEFAULT 'μµμ‹  κ³Όν•™ λ‰΄μ¤';
```

## λ¬Έμ  ν•΄κ²°

### 1. λ‰΄μ¤ μ¶”μ² API μ—°κ²° μ‹¤ν¨
- λ‰΄μ¤ μ¶”μ² APIκ°€ ν¬νΈ 8001μ—μ„ μ‹¤ν–‰ μ¤‘μΈμ§€ ν™•μΈ
- `http://34.61.170.171:8001/recommendations` μ ‘κ·Ό κ°€λ¥ν•μ§€ ν™•μΈ

### 2. ν‚¤μ›λ“ μ¶”μ¶ μ‹¤ν¨
- OpenAI API ν‚¤κ°€ μ¬λ°”λ¥΄κ² μ„¤μ •λμ—λ”μ§€ ν™•μΈ
- ν”„λ΅ν•„ μ»¨ν…μ¤νΈκ°€ λΉ„μ–΄μμ§€ μ•μ€μ§€ ν™•μΈ

### 3. μ•λ¦Όμ΄ μ „μ†΅λμ§€ μ•μ
- μ‚¬μ©μμ μ•λ¦Ό μ‹κ°„ μ„¤μ • ν™•μΈ
- Slack WebHook URLκ³Ό μ΄λ©”μΌ μ£Όμ†κ°€ μ¬λ°”λ¥Έμ§€ ν™•μΈ
- Brevo API ν‚¤κ°€ μ ν¨ν•μ§€ ν™•μΈ

### 4. λ΅κ·Έ ν™•μΈ
```bash
# μ‹¤μ‹κ°„ λ΅κ·Έ ν™•μΈ
tail -f notification_system.log
```

## ν…μ¤νΈ μµμ…

```bash
python test_simple_notification.py
```

1. **ν”„λ΅ν•„ ν‚¤μ›λ“ μ¶”μ¶ ν…μ¤νΈ**: `extract_profile_keywords` ν•¨μ ν…μ¤νΈ
2. **API μ—°κ²° ν…μ¤νΈ**: λ‰΄μ¤ μ¶”μ² API μ—°κ²° ν™•μΈ
3. **RAG ν•¨μ ν…μ¤νΈ**: μ „μ²΄ μ¶”μ² λ΅μ§ ν…μ¤νΈ
4. **μ‚¬μ©μ μ •λ³΄ μ΅°ν ν…μ¤νΈ**: Supabase μ—°κ²° ν™•μΈ
5. **ν„μ¬ μ‹κ°„ μ•λ¦Ό λ€μƒ ν™•μΈ**: μ•λ¦Ό λ€μƒ μ‚¬μ©μ ν™•μΈ
6. **μ „μ²΄ μ‹μ¤ν… ν…μ¤νΈ**: μ‹¤μ  μ „μ†΅ μ—†μ΄ μ „μ²΄ λ΅μ§ ν…μ¤νΈ

## μ¥μ 

1. **μ½”λ“ μ¬μ‚¬μ©**: κΈ°μ΅΄ `news_recommendation.py` ν•¨μ ν™μ©
2. **κ°„λ‹¨ν• κµ¬μ΅°**: ν•λ‚μ νμΌλ΅ λ¨λ“  κΈ°λ¥ κµ¬ν„
3. **Docker λ¶ν•„μ”**: λ΅μ»¬μ—μ„ μ§μ ‘ μ‹¤ν–‰ κ°€λ¥
4. **κ°μΈν™”**: μ‚¬μ©μ ν”„λ΅ν•„ κΈ°λ° μλ™ μΏΌλ¦¬ μƒμ„±
5. **μ μ—°μ„±**: μλ™ μΏΌλ¦¬ μ„¤μ •λ„ μ§€μ›

## μ£Όμμ‚¬ν•­

1. **API ν‚¤ λ³΄μ•**: Brevo API ν‚¤κ°€ μ½”λ“μ— ν•λ“μ½”λ”©λμ–΄ μμΌλ―€λ΅ ν™κ²½ λ³€μλ΅ κ΄€λ¦¬ν•λ” κ²ƒμ„ κ¶μ¥
2. **λ„¤νΈμ›ν¬ μ—°κ²°**: λ‰΄μ¤ μ¶”μ² APIμ™€μ μ—°κ²°μ΄ μ‹¤ν¨ν•΄λ„ κΈ°λ³Έ λ©”μ‹μ§€λ΅ λ€μ²΄
3. **μ‹κ°„λ€**: μ‹μ¤ν…μ€ μ„λ²„μ λ΅μ»¬ μ‹κ°„μ„ κΈ°μ¤€μΌλ΅ μ‘λ™
4. **μμ΅΄μ„±**: `news_recommendation.py`κ°€ μ •μƒμ μΌλ΅ μ‹¤ν–‰λμ–΄μ•Ό ν•¨

## ν™•μ¥ κ°€λ¥μ„±

- λ” λ§μ€ μ•λ¦Ό μ±„λ„ μ¶”κ°€ (Discord, Telegram λ“±)
- μ•λ¦Ό λΉλ„ μ΅°μ • (λ§¤μΌ, λ§¤μ£Ό λ“±)
- μ•λ¦Ό λ‚΄μ© μ»¤μ¤ν„°λ§μ΄μ§•
- μ•λ¦Ό μ „μ†΅ μ„±κ³µ/μ‹¤ν¨ ν†µκ³„
- λ” μ •κµν• NLP κΈ°λ° μΏΌλ¦¬ μƒμ„± 